<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>Kuiz Skor Ganti Gaji</title>
  <meta name="description" content="Kuiz ringkas untuk menilai kesiapan ganti gaji keluarga dan mengira jurang perlindungan." />
  <meta property="og:title" content="Kuiz Skor Ganti Gaji" />
  <meta property="og:description" content="Nilai tahap kesiapan anda & ketahui jurang perlindungan keluarga." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://dummyimage.com/1200x630/1f2937/e5e7eb&text=Kuiz+Skor+Ganti+Gaji" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3EðŸ’¼%3C/text%3E%3C/svg%3E">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Guna CSS biasa supaya serasi di GitHub Pages (tanpa build Tailwind) */
    .card{ background: rgba(15,23,42,.6); backdrop-filter: blur(6px); border-radius: 1rem; box-shadow: 0 10px 25px rgba(0,0,0,.35); border:1px solid #0b1220; }
    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:.5rem; border-radius:1rem; padding:.5rem 1rem; font-weight:600; box-shadow:0 4px 10px rgba(0,0,0,.2); }
    .btn-primary{ background:#2563eb; color:#fff; }
    .btn-ghost{ background:#0b1220; color:#e5e7eb; }
    .input{ width:100%; border-radius:.75rem; background:#0b1220; border:1px solid #334155; padding:.5rem .75rem; color:#e5e7eb; }
    .label{ font-size:.9rem; color:#cbd5e1; }
    .subtle{ font-size:.8rem; color:#94a3b8; }
    .title{ font-size:1.25rem; font-weight:700; color:#fff; }
    .kpi{ font-size:1.6rem; font-weight:800; }
  </style>
</head>
<body class="bg-gradient-to-b from-slate-950 to-slate-900 text-slate-100 min-h-screen">
  <header class="max-w-4xl mx-auto px-4 py-6">
    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
      <div>
        <h1 class="text-2xl md:text-3xl font-bold">Kuiz Skor Ganti Gaji</h1>
        <p class="text-slate-300">Nilai kesiapan keluarga & kira anggaran <span class="font-semibold">jurang perlindungan</span> â€” cepat, ringkas, tanpa data sensitif.</p>
      </div>
      <div class="flex items-center gap-2">
        <button id="btnShare" class="btn btn-ghost" type="button">Kongsi</button>
        <button id="btnPrint" class="btn btn-ghost" type="button">Cetak / PDF</button>
        <a id="btnReset" class="btn btn-ghost" href="#">Reset</a>
      </div>
    </div>
  </header>

  <main class="max-w-4xl mx-auto px-4 pb-24">
    <section class="card p-5 md:p-6">
      <h2 class="title mb-4">Maklumat Asas</h2>
      <div class="grid md:grid-cols-2 gap-4 md:gap-6">
        <div>
          <label class="label" for="gaji">Gaji bersih bulanan (RM)</label>
          <input class="input" id="gaji" type="text" inputmode="decimal" placeholder="contoh 3000 atau 3,000" />
          <p class="subtle mt-1">Anggaran selepas potongan tetap.</p>
        </div>
        <div>
          <label class="label" for="tanggungan">Bilangan tanggungan</label>
          <input class="input" id="tanggungan" type="text" inputmode="numeric" placeholder="0,1,2,3â€¦" />
        </div>
        <div>
          <label class="label" for="bulanDana">Dana kecemasan (bulan perbelanjaan)</label>
          <input class="input" id="bulanDana" type="text" inputmode="numeric" placeholder="0â€“12" />
        </div>
        <div>
          <label class="label" for="hutang">Baki hutang utama (RM)</label>
          <input class="input" id="hutang" type="text" inputmode="decimal" placeholder="contoh 50000" />
        </div>
        <div>
          <label class="label" for="coverSedia">Perlindungan pendapatan/hibah sedia ada (RM)</label>
          <input class="input" id="coverSedia" type="text" inputmode="decimal" placeholder="contoh 100000" />
        </div>
        <div>
          <label class="label" for="bajet">Bajet bulanan yang selesa (RM)</label>
          <input class="input" id="bajet" type="text" inputmode="decimal" placeholder="contoh 90" />
        </div>
        <div>
          <label class="label" for="tempoh">Tempoh ganti gaji yang diingini (tahun)</label>
          <select id="tempoh" class="input">
            <option value="3">3 tahun (minimum)</option>
            <option value="5" selected>5 tahun (disaran)</option>
            <option value="7">7 tahun</option>
            <option value="10">10 tahun</option>
          </select>
        </div>
        <div>
          <label class="label" for="pendapatanSampingan">Ada pendapatan sampingan stabil?</label>
          <select id="pendapatanSampingan" class="input">
            <option value="tiada" selected>Tiada</option>
            <option value="ada">Ada (â‰¥ RM300/bulan)</option>
          </select>
        </div>
        <div class="md:col-span-2">
          <label class="label" for="risikoKerja">Pendedahan risiko kerja/harian</label>
          <select id="risikoKerja" class="input">
            <option value="rendah" selected>Rendah (pejabat/remote)</option>
            <option value="sederhana">Sederhana (memandu kerap/kerja lapangan ringan)</option>
            <option value="tinggi">Tinggi (tapak binaan/kerja fizikal/berisiko)</option>
          </select>
        </div>
      </div>

      <div class="mt-6 flex flex-wrap items-center gap-3">
        <button id="btnKira" class="btn btn-primary" type="button">Kira Skor</button>
        <span id="msg" class="text-slate-400 text-sm"></span>
      </div>
    </section>

    <section id="hasilSection" class="mt-6 hidden">
      <div class="card p-5 md:p-6">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
          <div>
            <h3 class="title">Hasil & Saranan</h3>
            <p class="subtle">Keputusan berdasarkan input anda. Ini bukan tawaran/ilustrasi polisi.</p>
          </div>
          <div class="text-right">
            <div id="badgeKategori" class="inline-block rounded-full px-3 py-1 text-sm font-medium bg-slate-800 text-slate-200">Kategori</div>
          </div>
        </div>

        <div class="grid md:grid-cols-3 gap-4 md:gap-6 mt-6">
          <div class="card p-4">
            <div class="text-slate-400 text-sm">Skor Kesiapan</div>
            <div id="skor" class="kpi">0</div>
            <div id="labelSkor" class="text-slate-300">â€“</div>
          </div>
          <div class="card p-4">
            <div class="text-slate-400 text-sm">Sasaran Perlindungan</div>
            <div id="sasaran" class="kpi">RM0</div>
            <div class="text-slate-300">Jumlah perlindungan menyamai tempoh ganti gaji + hutang âˆ’ dana sedia ada.</div>
          </div>
          <div class="card p-4">
            <div class="text-slate-400 text-sm">Jurang Perlindungan</div>
            <div id="jurang" class="kpi">RM0</div>
            <div class="text-slate-300">Anggaran jurang selepas ambil kira perlindungan sedia ada.</div>
          </div>
        </div>

        <div class="mt-6 grid md:grid-cols-2 gap-4 md:gap-6">
          <div class="card p-4">
            <h4 class="font-semibold mb-2">Saranan Tindakan 3 Langkah</h4>
            <ol class="list-decimal pl-5 space-y-1 text-slate-200" id="langkahList">
              <li>Lengkapkan dana kecemasan sekurang-kurangnya 3â€“6 bulan.</li>
              <li>Utamakan pelan ganti gaji sehingga jurang berkurang.</li>
              <li>Semak semula perlindungan setiap 12 bulan/selepas milestone.</li>
            </ol>
          </div>
          <div class="card p-4">
            <h4 class="font-semibold mb-2">CTA</h4>
            <p class="text-slate-200 mb-3">Mahukan semakan percuma & cadangan ikut bajet anda?</p>
            <div class="flex flex-wrap gap-2">
              <a class="btn btn-primary" href="https://wa.me/60169514414?text=Hai%20Sukor%2C%20saya%20nak%20semak%20kuiz%20Skor%20Ganti%20Gaji%20saya." target="_blank" rel="noopener">WhatsApp Sukor</a>
              <button class="btn btn-ghost" id="btnSalin">Salin Ringkasan</button>
            </div>
            <p class="subtle mt-3">Powered by <span class="font-semibold">Sukor Rija Legacy</span>.</p>
          </div>
        </div>

        <div class="mt-6 text-xs text-slate-400 leading-relaxed">
          <p><strong>Penafian:</strong> Ini alat pendidikan umum. Bukan nasihat kewangan, bukan sebut harga, dan tertakluk kepada terma & proses underwriting. Nilai dan saranan adalah anggaran bagi membantu perbincangan awal.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="max-w-4xl mx-auto px-4 pb-10 text-center text-slate-400">
    <hr class="border-slate-800 mb-4" />
    <p>Â© <span id="year"></span> Kuiz Skor Ganti Gaji Â· Powered by Sukor Rija Legacy</p>
  </footer>

  <script>
    const fmtRM = (n) => new Intl.NumberFormat('ms-MY', { style: 'currency', currency: 'MYR', maximumFractionDigits: 0 }).format(Math.max(0, Math.round(n||0)));
    const el = (id) => document.getElementById(id);
    const year = new Date().getFullYear();
    el('year').textContent = year;

    // Parse nombor yang mungkin ada koma/ruang
    const num = (id) => {
      const raw = (el(id).value || '').toString().replace(/[\s,]/g,'');
      const v = parseFloat(raw);
      return isNaN(v) ? 0 : v;
    };

    function kira(){
      const gaji = num('gaji');
      const tanggungan = num('tanggungan');
      const bulanDana = num('bulanDana');
      const hutang = num('hutang');
      const coverSedia = num('coverSedia');
      const bajet = num('bajet');
      const tempoh = +el('tempoh').value || 5;
      const pendapatanSampingan = el('pendapatanSampingan').value;
      const risiko = el('risikoKerja').value;

      if(!gaji){ el('msg').textContent = 'Masukkan gaji bersih bulanan dan tekan Kira Skor.'; return; }
      el('msg').textContent = '';

      const bulan = tempoh * 12;
      const sasaranKasar = (gaji * bulan) + hutang - (bulanDana * gaji);
      const sasaran = Math.max(0, sasaranKasar);
      const jurang = Math.max(0, sasaran - coverSedia);

      const nisbahBajet = gaji ? Math.min(1, (bajet / (gaji*0.10))) : 0; // 0â€“1
      let skor = Math.round(nisbahBajet * 60);
      if(bulanDana < 3) skor -= 10; else if(bulanDana > 6) skor += 5;
      if(tanggungan >= 3 && coverSedia < (gaji*12)) skor -= 5;
      if(pendapatanSampingan === 'ada') skor += 5;
      if(risiko === 'sederhana') skor -= 3; else if(risiko === 'tinggi') skor -= 6;
      const nisbahJurang = sasaran ? Math.min(1, jurang / sasaran) : 0;
      if(nisbahJurang > 0.66) skor -= 6; else if(nisbahJurang > 0.33) skor -= 3;
      skor = Math.max(0, Math.min(100, skor));

      let kategori = 'Perlu Diperkasa';
      let label = 'Sedang';
      if(skor < 40){ kategori = 'Kritikal'; label = 'Banyak ruang penambahbaikan'; }
      else if(skor >= 70){ kategori = 'Mantap'; label = 'Arah yang baik, teruskan tingkatkan perlindungan'; }

      const langkah = [];
      if(bulanDana < 3) langkah.push('Top-up dana kecemasan sehingga 3â€“6 bulan.');
      if(jurang > 0) langkah.push('Rancang pelan ganti gaji untuk kecilkan jurang '+fmtRM(jurang)+'.');
      langkah.push('Semak polisi sedia ada & kemas kini penama/hibah.');
      if(tanggungan >= 1) langkah.push('Utamakan perlindungan pencari nafkah terlebih dahulu.');
      if(bajet > 0) langkah.push('Tetapkan bajet bulanan konsisten ('+fmtRM(bajet)+').');

      el('hasilSection').classList.remove('hidden');
      el('skor').textContent = skor;
      el('labelSkor').textContent = label;
      el('sasaran').textContent = fmtRM(sasaran);
      el('jurang').textContent = fmtRM(jurang);
      el('badgeKategori').textContent = kategori;
      el('badgeKategori').className = 'inline-block rounded-full px-3 py-1 text-sm font-medium ' + (kategori==='Kritikal' ? 'bg-red-700/40 text-red-200' : kategori==='Mantap' ? 'bg-emerald-700/40 text-emerald-200' : 'bg-yellow-700/40 text-yellow-200');

      const ul = el('langkahList');
      ul.innerHTML = '';
      langkah.slice(0,5).forEach(txt=>{ const li=document.createElement('li'); li.textContent=txt; ul.appendChild(li); });

      window.__ringkasan = { skor, kategori, label, sasaran, jurang, gaji, tanggungan, bulanDana, hutang, coverSedia, bajet, tempoh };
    }

    function salinRingkasan(){
      const r = window.__ringkasan; if(!r){ alert('Kira dulu ya.'); return; }
      const teks = `Kuiz Skor Ganti Gaji\n\nSkor: ${r.skor} (${r.kategori})\nSasaran perlindungan: ${fmtRM(r.sasaran)}\nJurang perlindungan: ${fmtRM(r.jurang)}\n\nRingkas input: Gaji ${fmtRM(r.gaji)}, Tanggung ${r.tanggungan}, Dana ${r.bulanDana} bulan, Hutang ${fmtRM(r.hutang)}, Cover sedia ada ${fmtRM(r.coverSedia)}, Tempoh ${r.tempoh} tahun.\n\nPowered by Sukor Rija Legacy.`;
      navigator.clipboard.writeText(teks).then(()=>{ alert('Ringkasan disalin. Boleh tampal ke WhatsApp/FB.'); });
    }

    function shareWeb(){
      const r = window.__ringkasan; if(!r){ alert('Kira dulu ya.'); return; }
      const text = `Skor Ganti Gaji saya: ${r.skor} (${r.kategori}). Jurang ~ ${fmtRM(r.jurang)}.`;
      const url = location.href;
      if(navigator.share){ navigator.share({ title: 'Kuiz Skor Ganti Gaji', text, url }).catch(()=>{}); }
      else { window.open(`https://wa.me/?text=${encodeURIComponent(text+' '+url)}`, '_blank'); }
    }

    // Event listeners
    el('btnKira').addEventListener('click', kira);
    el('btnSalin').addEventListener('click', salinRingkasan);
    el('btnShare').addEventListener('click', shareWeb);
    el('btnPrint').addEventListener('click', ()=>window.print());

    // Auto-kira bila tekan Enter dalam mana-mana input
    document.querySelectorAll('input, select').forEach(inp=>{
      inp.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); kira(); }});
    });

    // Auto-kira bila gaji diisi
    document.querySelectorAll('#gaji,#tanggungan,#bulanDana,#hutang,#coverSedia,#bajet,#tempoh,#pendapatanSampingan,#risikoKerja').forEach(i=>{
      i.addEventListener('input', ()=>{ if(num('gaji')>0) kira(); });
      i.addEventListener('change', ()=>{ if(num('gaji')>0) kira(); });
    });

    // Reset behaviour: just reload
    el('btnReset').addEventListener('click', (e)=>{ e.preventDefault(); location.reload(); });
  </script>
</body>
</html>
